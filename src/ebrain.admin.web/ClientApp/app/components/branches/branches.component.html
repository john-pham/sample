<header>
    <div class="row" style="padding-top: 15px;">
        <div class="col-xs-12" id="breadcrumb">
            <a class="show-sidebar pull-left" routerLink="/">
                <i class="fa fa-bars"></i>
            </a>
            <ol class="breadcrumb pull-left">
                <li><a routerLink="/mn_main_categories">{{'menu.main.Categories' | translate}}</a></li>
                <li>{{'pageMain.branch.header' | translate}}</li>
            </ol>
        </div>
    </div>
</header>

<div class="row control-box">
    <div class="col-sm-10">
        <div class="form-group search-box">
            <search-box (searchChange)="onSearchChanged($event)" placeholder="{{'pageMain.branch.searchBox' | translate}}">></search-box>
        </div>
    </div>
    <div class="col-sm-2">
        <div class="text-right">
            <button class="btn btn-primary" (click)="addBranch(template)"><i class="fa fa-plus-circle"></i> {{'pageMain.branch.newBranch' | translate}}</button>
        </div>
    </div>
</div>

<div [@fadeInOut]>
    <!--DATA TABLE-->
    <ngx-datatable class="material colored-header sm table table-bordered table-responsive"
                   [loadingIndicator]="loadingIndicator"
                   [rows]="rows"
                   [columns]="columns"
                   [columnMode]="'force'"
                   [scrollbarV]="verticalScrollbar"
                   [headerHeight]="50"
                   [footerHeight]="50"
                   [rowHeight]="'auto'"
                   [externalPaging]="true"
                   [count]="page.totalElements"
                   [offset]="page.pageNumber"
                   [limit]="page.size"
                   (page)='setPage($event)'>
    </ngx-datatable>

    <!-- TEMPLATEs -->
    <ng-template #statusHeaderTemplate>
        <i class="fa fa-check-square-o"></i>
    </ng-template>

    <ng-template #statusTemplate let-row="row" let-value="value">
        <span attr.title="{{value}}">
            {{value}}
        </span>
    </ng-template>

    <ng-template #logoTemplate let-row="row" let-value="value">
        <img src="/uploads/logos/{{value}}" />
    </ng-template>

    <ng-template #nameTemplate let-row="row" let-value="value">
        <span attr.title="{{value}}">
            {{value}}
        </span>
    </ng-template>

    <ng-template #descriptionTemplate let-row="row" let-value="value">
        <span attr.title="{{value}}">
            {{value}}
        </span>
    </ng-template>
    <ng-template #actionsTemplate let-row="row" let-value="value">
        <a class="btn btn-link btn-xs" href="javascript:;" (click)="editHead(templateHead, value)"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> {{'button.Manage' | translate}}</a>
        |
        <a class="btn btn-link btn-xs" href="javascript:;" (click)="editBranch(template, value)"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> {{'button.Edit' | translate}}</a>
        |
        <a class="btn btn-link btn-xs" href="javascript:;" (click)="deleteBranch(value)"><i class="fa fa-trash-o" aria-hidden="true"></i> {{'button.Delete' | translate}}</a>
    </ng-template>
</div>

<ng-template #templateHead>
    <div class="modal-header">
        <button type="button" class="close" (click)="closeHead()" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="branch-modalLabel">{{'label.branch.HeaderAdd' | translate}}</h4>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-12">
                <div class="text-right">
                    <button type="button" class="btn btn-primary" (click)="saveHead()">{{'button.Save' | translate}}</button>
                </div>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-sm-12">
                <!--DATA TABLE-->
                <ngx-datatable class="material colored-header sm table table-bordered table-responsive"
                               [loadingIndicator]="loadingIndicator"
                               [rows]="rowHeads"
                               [rowHeight]="auto"
                               [columns]="columnHeads"
                               [scrollbarV]="verticalScrollbar"
                               [columnMode]="'force'">
                </ngx-datatable>

                <ng-template #checkboxTemplate let-rowIndex="rowIndex" let-row="row" let-value="value">
                    <input type="checkbox" checked value="{{value}}"/>
                </ng-template>

                <ng-template #nameTemplate let-row="row" let-value="value">
                    <span attr.title="{{value}}">
                        {{value}}
                    </span>
                </ng-template>
            </div>
        </div>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="closeHead()" data-dismiss="modal">{{'button.Close' | translate}}</button>
        <button type="button" class="btn btn-primary" (click)="saveHead()">{{'button.Save' | translate}}</button>
    </div>
</ng-template>

<ng-template #template>
    <div class="modal-header">
        <button type="button" class="close" (click)="close()" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="branch-modalLabel">{{'label.branch.HeaderAdd' | translate}}</h4>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <img [src]="src" [hidden]="!src">
            <input type="file" id="avatar" (change)="onFileChange($event)" #fileInput>
            <button type="button" class="btn btn-sm btn-default" (click)="clearFile()">clear file</button>
        </div>
        <div class="form-group">
            <label for="pointer.code" class="control-label">{{'label.branch.Code' | translate}}</label>
            <input type="text" class="form-control" [(ngModel)]="pointer.code" required>
        </div>
        <div class="form-group">
            <label for="pointer.name" class="control-label">{{'label.branch.Name' | translate}}</label>
            <input type="text" class="form-control" [(ngModel)]="pointer.name" required>
        </div>
        <div class="form-group">
            <label for="pointer.email" class="control-label">{{'label.branch.Email' | translate}}</label>
            <input type="text" class="form-control" [(ngModel)]="pointer.email">
        </div>
        <div class="form-group">
            <label for="pointer.address" class="control-label">{{'label.branch.Address' | translate}}</label>
            <textarea class="form-control" [(ngModel)]="pointer.address" required></textarea>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="close()" data-dismiss="modal">{{'button.Close' | translate}}</button>
        <button type="button" class="btn btn-primary" (click)="save()">{{'button.Save' | translate}}</button>
    </div>
</ng-template>
